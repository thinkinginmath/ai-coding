# 第三阶段书面说明：电商购物车

> **说明**：请在完成第三阶段后填写此文档。这是第三阶段评分的一部分。

## 1. 并发修改处理

### 问题描述

多个用户（所有者 + 协作者）可以同时修改同一个购物车。描述你发现的并发问题以及如何处理它们。

### 识别出的竞态条件

1. **竞态条件 1**：
   - 场景：
   - 影响：

2. **竞态条件 2**：
   - 场景：
   - 影响：

### 你的解决方案

<!-- 描述你处理并发修改的方法 -->

**方法**：

**实现细节**：

```typescript
// 如有帮助，可以包含相关代码片段
```

**权衡**：
- 优点：
- 缺点：

### 考虑过的替代方案

1. **乐观锁**：
2. **悲观锁**：
3. **最后写入者获胜**：
4. **CRDT**：

---

## 2. 扩展性分析

### 当前架构限制

在 10,000 次结账/分钟时，什么会出问题？

1. **限制 1**：
   - 为什么会出问题：
   - 在什么阈值时：

2. **限制 2**：
   - 为什么会出问题：
   - 在什么阈值时：

3. **限制 3**：
   - 为什么会出问题：
   - 在什么阈值时：

### 扩展方案建议

| 组件 | 当前方案 | 扩展后方案 | 迁移路径 |
|------|----------|-----------|----------|
| 存储 | | | |
| 库存 | | | |
| 汇率 | | | |
| 结账锁 | | | |

### 大规模下的推荐架构

<!-- 描述在 1 万次结账/分钟时架构应该是什么样的 -->

---

## 3. 诚实评估

### 做得好的地方

1.
2.

### 如果重来会怎么做

1.
2.

### 已知问题 / 技术债务

1.
2.

### 花费时间

- 第一阶段：
- 第二阶段：
- 第三阶段：
- 总计：

---

## 4. 补充说明

<!-- 其他考虑因素、你想到的边界情况，或给评审者的备注 -->
